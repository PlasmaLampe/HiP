<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for javascripts/services/KeyValueService.js</title>
    <meta charset="utf-8">

    <link rel="stylesheet" href="../../prettify.css">

    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header high">
    <h1>Code coverage report for <span class="entity">javascripts/services/KeyValueService.js</span></h1>
    <h2>
        
        Statements: <span class="metric">90.91% <small>(80 / 88)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">64.29% <small>(9 / 14)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">85.19% <small>(23 / 27)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">90.91% <small>(80 / 88)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">javascripts/services/</a> &#187; KeyValueService.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">29</span>
<span class="cline-any cline-yes">29</span>
<span class="cline-any cline-yes">29</span>
<span class="cline-any cline-yes">63</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">63</span>
<span class="cline-any cline-yes">35</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">35</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">28</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">29</span>
<span class="cline-any cline-yes">29</span>
<span class="cline-any cline-yes">29</span>
<span class="cline-any cline-yes">29</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-yes">23</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-yes">12</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * Created by Jörg Amelunxen on 23.01.15.
 *
 * This service handles the connection to the key/value store.
 */
&nbsp;
servicesModule.service('keyValueService', ['$http', 'commonTaskService', 'typeService', function($http, commonTaskService, typeService) {
    var that = this;
&nbsp;
    this.downloadedKVStore = [];
&nbsp;
    /* fetch types on startup */
    this.types = "-1";
    typeService.getTypes(function(types){
        that.types = types;
    });
&nbsp;
    /**
     * This function wrapps the serialized from from the Backend to the JSON format of a Key/Value-Store
     * @param uID                   uID of the used KV-Store
     * @param listOfKeysAndValues   the list of the keys and values
     * @returns {{}}                the JSON format of the KV-Store
     */
    function serializedFormToJSON(uID, listOfKeysAndValues) {
        var JSON = {};
        var keys = [];
        listOfKeysAndValues.forEach(function(item) {
            var token = item.split("#");
&nbsp;
            // add key and value to JSON object
            if(token[0] != "type"){
                JSON[token[0]] = token[1];
&nbsp;
                // add to key list
                keys.push(token[0]);
            }else{
                JSON.type = token[1];
            }
        });
&nbsp;
        JSON.uID = uID;
        JSON.keys = keys;
        JSON.length = keys.length;
        return JSON;
    }
&nbsp;
    /**
     * This function collects every child type that has the same father (i.e. supertype) as the given one
     * @param name      The name of the current type
     * @returns {Array} An array containing all the types
     */
    this.findAllTypesLikeChild = <span class="fstat-no" title="function not covered" >function(name){</span>
<span class="cstat-no" title="statement not covered" >        if(that.types != "-1"){</span>
<span class="cstat-no" title="statement not covered" >            return typeService.constructTypechainFromOfflineData(name, that.types);</span>
        }else{
<span class="cstat-no" title="statement not covered" >            return [];</span>
        }
    };
&nbsp;
    /**
     * Fetches a new Key/Value store from the backend.
     *
     * @param uID {String}:         The uID of the KV-Store that should be fetched
     * @param doSth {function}:     The callback function. The data parameter holds the KV-Store as JSON Object.
     */
    this.getKVStore = function(uID, doSth){
&nbsp;
        $http.get('/admin/kv/'+uID)
            .success(function(data){
                var JSON = serializedFormToJSON(uID, data[0].list);
&nbsp;
                that.downloadedKVStore = JSON;
                doSth(JSON);
            }).error(<span class="fstat-no" title="function not covered" >function(){</span>
<span class="cstat-no" title="statement not covered" >                console.log("Error while loading KV store");</span>
            });
    };
&nbsp;
    /**
     * Deletes the specified KV-Store
     * @param uID {String}:       The uID of the KV-Store that should be deleted
     */
    this.deleteKVStore = function(uID){
        $http.delete('/admin/kv/'+uID).error(<span class="fstat-no" title="function not covered" >function(){</span>
<span class="cstat-no" title="statement not covered" >            console.log("Error while deleting KV store");</span>
        })
    };
&nbsp;
    /**
     * Creates a new KV store in the Backend
     *
     * @param list {Array[String]}: A ist containing all keys and values encoded like ["key#value",'key2#value2']
     * @return                      The created KV-Store in JSON Format
     */
    this.createKVStore = function(list){
        var uID = commonTaskService.generateUID(list.toString());
&nbsp;
        var post = {
            uID: uID,
            list: list
        };
&nbsp;
        $http.post('/admin/kv', post);
&nbsp;
        return serializedFormToJSON(uID,post.list);
    };
&nbsp;
    /**
     * Creates an empty KV-Store with fields according to the given type
     *
     * @param type {String}:    The chosen type for the KV-Store
     * @return                  The created KV-Store in JSON Format
     */
    this.createEmptyStoreAccordingToType = function(type){
        /* find correct type */
        var typeObject = typeService.constructTypeFromOfflineData(type, that.types);
&nbsp;
        var keys    = typeObject.keys;
        var values  = typeObject.values;
        var list    = [];
&nbsp;
        /* add type value */
        list.push("type#"+type);
&nbsp;
        /* create list */
        keys.forEach(function(key){
            var keyHasADefaultValue = (jQuery.inArray(key, keys) != -1);
&nbsp;
            <span class="missing-if-branch" title="if path not taken" >I</span>if(!keyHasADefaultValue || values == undefined){
<span class="cstat-no" title="statement not covered" >                list.push(key+"#initMe");</span>
            }else{
                list.push(key+"#"+values[jQuery.inArray(key, keys )]);
            }
        });
&nbsp;
        return that.createKVStore(list);
    };
&nbsp;
    /**
     * Wrapper for the createKVStore function.
     * You can now create a KV-Store with a JSON object of the following structure:
     * {
     *  type: Type of the store =&gt; influence on needed keys
     *  keys: Array[String] containing all the keys
     *  key1: value1
     *  key2: value2
     *  [...]
     * }
     *
     * @param JSON the object that should be transformed in a KV-Store
     */
    this.createKVStoreAsJSON = function(json){
        var list = [];
&nbsp;
        var keys = json.keys;
&nbsp;
        // add type
        list.push("type"+"#"+json.type);
&nbsp;
        // add keys and values
        keys.forEach(function(key){
            list.push(key+"#"+json[key]);
        });
&nbsp;
        that.createKVStore(list);
    };
&nbsp;
    /**
     * Fetches the type of the store with the given uID and returns it as a parameter in the callback function
     *
     * @param uID       uID of the checked store
     * @param doSth     callback function
     */
    this.checkType = function(uID, doSth){
        that.getKVStore(uID, function(store){
            doSth(store.type);
        });
    };
&nbsp;
    /**
     * Checks if the store has every needed fields for its type. If this is not the case, the function
     * creates the needed fields and sends them to the backend.
     *
     * @param uID       uID of the checked store
     * @param doSth     callback function. The function contains a list of the created fields as a first parameter
     *                  and the complete object as the second one
     */
    this.checkFieldsForTypeAndCreateIfNeeded = function(uID, doSth){
        that.getKVStore(uID, function(store){
            /* search for needed fields */
            var typeObject = typeService.constructTypeFromOfflineData(store.type, that.types);
            var neededFields = typeObject.keys;
&nbsp;
            var created = [];
&nbsp;
            neededFields.forEach(function(key){
                if(store[key] == undefined){
                    store.keys.push(key);
&nbsp;
                    store[key] = "initMe";
&nbsp;
                    // create field
                    $http.put("/admin/kv/"+uID+"/"+key+"#initMe");
&nbsp;
                    // add to created array
                    created.push(key+"");
                }
            });
&nbsp;
            <span class="missing-if-branch" title="else path not taken" >E</span>if(doSth != undefined){
                doSth(created, store);
            }
        });
    };
&nbsp;
    /**
     * Updates a KV-Store on the server side
     *
     * @param store             The store with the new values as JSON container
     * @param successCallback   The function is run on success of the update
     */
    this.updateKVStore = function(store, successCallback){
        var postThis = {
            uID: store.uID,
            list: ["type#"+store.type]
        };
&nbsp;
        // serialize the keys and values
        var keys = store.keys;
&nbsp;
        keys.forEach(function(key){
            postThis.list.push(key+"#"+store[key]);
        });
&nbsp;
        $http.put('/admin/kv',postThis).success(function(){
            <span class="missing-if-branch" title="if path not taken" >I</span>if(successCallback != undefined)
<span class="cstat-no" title="statement not covered" >                successCallback();</span>
        }).error(<span class="fstat-no" title="function not covered" >function(){</span>
<span class="cstat-no" title="statement not covered" >            console.log("Error while updating the kvStore...")</span>
        });
    };
&nbsp;
    /**
     * This function copies a key with its value from one store to another store
     *
     * @param fromStore     the uID of the source store
     * @param key           the key that should be copied
     * @param toStore       the uID of the destination store
     */
    this.transferKey = function(fromStore, key, toStore){
        that.getKVStore(fromStore, function(store){
           var copyValue = store[key];
&nbsp;
            that.getKVStore(toStore, function(secondStore){
                /* add key to second store */
                secondStore.keys.push(key);
                secondStore[key] = copyValue;
&nbsp;
                /* send store back */
                that.updateKVStore(secondStore);
            });
        });
    };
&nbsp;
}]);</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Mar 30 2015 17:06:03 GMT+0200 (CEST)</div>
</div>

<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>

<script src="../../sorter.js"></script>
</body>
</html>
